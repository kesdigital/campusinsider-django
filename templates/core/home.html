{% extends 'base.html' %}
{% load static %}
{% load humanize %}

{% block head %}
<script src="{% static "js/home.min.js" %}" defer></script>
<title>Campus Insider | Your independent source of campus news, events, people......</title>
{% endblock head %}

{% block main %}
<main>

  <section class="featured-profiles">
    <header class="featured-profiles__header">
      <h2 class="featured-profiles__header__title">Featured Profiles</h2>
    </header>
    <div class="featured-profiles__container">
      {% for featured_profile in featured_profiles %}
        <article class="profile">
          <a href="{{ featured_profile.profile.get_absolute_url }}">
            <img class="profile__avatar" src="{{ featured_profile.profile.avatar.url }}" alt="{{ featured_profile.profile.name }}">
          </a>
          <a href="{{ featured_profile.profile.get_absolute_url }}">
            <p class="profile__name">{{ featured_profile.profile.name }}</p>
          </a>
        </article>
      {% endfor %}
    </div>
  </section>

  <section class="featured-posts">
    <header class="featured-posts__header">
      <h2 class="featured-posts__header__title">Featured Posts</h2>
      <a class="featured-posts__header__more" href="{% url "posts:post_list" %}">More</a>
    </header>

    <div class="featured-posts__container">
      {% for post in featured_posts %}
        <article class="post">
          <header class="post__header">
            <img class="post__header__thumbnail" src="{{ post.thumbnail.url }}" alt="{{ post.title }}">
            <h3 class="post__header__title">{{ post.title }}</h3>
          </header>
          <footer class="post__footer">
            <img class="post__footer__author" src="{{ post.author.profile.avatar.url }}" alt="{{ post.author.profile.name }}">
            <p  class="post__footer__name">{{ post.author.profile.name }} - {{ post.published_at  | naturaltime }}</p>
          </footer>
        </article>
      {% empty %}
      <p>No posts have been featured yet.</p>
      {% endfor %}
    </div>
  </section>

  <section class="featured-in-cinema">
    <header class="featured-in-cinema__header">
      <h2 class="featured-in-cinema__header__title">In Cinema</h2>
      <a class="featured-in-cinema__header__more" href="#">More</a>
    </header>
  </section>

  <section class="featured-events">
    <header class="featured-events__header">
      <h2 class="featured-events__header__title">Events</h2>
      <a class="featured-events__header__more" href="#">More</a>
    </header>
  </section>

</main>
{% endblock main %}
